apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: authelia

resources:
  - namespace.yaml
  - service-account.yaml
  - secret-store.yaml         # Namespace-scoped SecretStore with Authelia policy
  - password-generator.yaml   # Generate passwords using ESO
  - external-secret.yaml      # Pull from Vault (after push)
  - configmap.yaml
  - ca-configmap.yaml
  - ca-certificates-secret.yaml
  - deployment.yaml
  - service.yaml
  - service-headless.yaml
  - destinationrule.yaml
  - peerauthentication.yaml
  # Manual mTLS configuration replaced by Kyverno ingress-mtls-automation policy
  # Resources automatically generated when service has annotation: istio.io/ingress-mtls: "true"