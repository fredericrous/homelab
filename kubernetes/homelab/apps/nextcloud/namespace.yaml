apiVersion: v1
kind: Namespace
metadata:
  name: nextcloud
  labels:
    name: nextcloud
    backup: velero
    # Enable Istio Ambient mode for better performance
    istio.io/dataplane-mode: ambient
    # Enable mTLS client CA certificate sync
    mtls.enabled: "true"
  annotations:
    # mTLS component configuration
    mtls/tls-secret-name: "nextcloud-tls"
    # PostgreSQL database generation
    postgres.cnpg.io/database-name: "nextcloud"
    postgres.cnpg.io/database-owner: "nextcloud"
    postgres.cnpg.io/cluster-name: "postgres-apps"
