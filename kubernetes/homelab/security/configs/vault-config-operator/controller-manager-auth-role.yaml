# Bootstrap auth role for vault-config-operator controller-manager
# This allows the operator to authenticate and manage other Vault resources
apiVersion: redhatcop.redhat.io/v1alpha1
kind: KubernetesAuthEngineRole
metadata:
  name: controller-manager
  namespace: vault-config-operator
spec:
  # Use kubernetes auth with existing controller-manager role
  authentication:
    path: kubernetes
    role: controller-manager
    serviceAccount:
      name: controller-manager
  path: kubernetes
  policies:
    - vault-admin
  targetServiceAccounts:
    - controller-manager
  targetNamespaces:
    targetNamespaces:
      - vault-config-operator
  tokenTTL: 86400
  tokenMaxTTL: 86400