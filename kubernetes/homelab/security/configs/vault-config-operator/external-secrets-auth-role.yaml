# Create Kubernetes auth role for External Secrets Operator
apiVersion: redhatcop.redhat.io/v1alpha1
kind: KubernetesAuthEngineRole
metadata:
  name: external-secrets-operator
  namespace: vault-config-operator
spec:
  authentication:
    path: kubernetes
    role: controller-manager
    serviceAccount:
      name: controller-manager
  path: kubernetes
  policies:
    - external-secrets-operator
  targetServiceAccounts:
    - external-secrets-external-secrets
  targetNamespaces:
    targetNamespaces:
      - external-secrets