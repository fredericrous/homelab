apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: lldap

resources:
  - namespace.yaml
  - service-account.yaml
  - secret-store.yaml        # Namespace-scoped SecretStore with LLDAP policy
  - password-generator.yaml  # Generate passwords using ESO
  - external-secret.yaml     # Pull from Vault (after push)
  # - database.yaml  # MOVED: to data-storage/configs/postgres/ (must be in same namespace as Cluster)
  - pvc.yaml
  - deployment.yaml
  - service.yaml
  # Manual mTLS configuration replaced by Kyverno ingress-mtls-automation policy
  # Resources automatically generated when service has annotation: istio.io/ingress-mtls: "true"
