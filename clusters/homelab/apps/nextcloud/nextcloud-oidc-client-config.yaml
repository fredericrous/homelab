---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nextcloud-oidc-client-config
  namespace: authelia
  labels:
    app.kubernetes.io/component: oidc-client
    app.kubernetes.io/part-of: authelia
data:
  nextcloud-client.yaml: |
    - client_id: nextcloud
      client_name: Nextcloud
      client_secret: '$pbkdf2-sha512$310000$nextcloud-secret-placeholder$nextcloud-hashed-secret-will-be-generated'
      public: false
      authorization_policy: two_factor
      require_pkce: true
      pkce_challenge_method: S256
      redirect_uris:
        - https://drivex.daddyshome.fr/apps/oidc_login/oidc
        - https://drivex.daddyshome.fr/apps/user_oidc/code
        - https://drivex.daddyshome.fr/apps/sociallogin/custom_oidc/Authelia
      scopes:
        - openid
        - profile
        - groups
        - email
      response_types:
        - code
      grant_types:
        - authorization_code
      response_modes:
        - form_post
        - query
        - fragment
      userinfo_signed_response_alg: none
