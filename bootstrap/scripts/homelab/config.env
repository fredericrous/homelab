# Bootstrap Configuration
# This file contains configurable values for bootstrap scripts
# Override any value by setting environment variables

# Load root .env file to get standard variables
# Note: This will be sourced by scripts, so we need to determine the root relative to this file
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT_ENV_FILE="${SCRIPT_DIR}/../../../.env"
if [[ -f "$ROOT_ENV_FILE" ]]; then
  source "$ROOT_ENV_FILE"
fi

# Cluster Network Configuration (use existing .env variables)
HOMELAB_IP="${HOMELAB_IP:-${CONTROL_PLANE_IP:-192.168.1.67}}"
NAS_IP="${NAS_IP:-192.168.1.42}"

# Port Configuration  
HOMELAB_EASTWEST_PORT="${HOMELAB_EASTWEST_PORT:-15443}"
NAS_EASTWEST_PORT="${NAS_EASTWEST_PORT:-61443}"
HOMELAB_ISTIOD_PORT="${HOMELAB_ISTIOD_PORT:-15010}"

# Vault Configuration (use existing .env variables)
NAS_VAULT_ADDR="${NAS_VAULT_ADDR:-${QNAP_VAULT_ADDR:-https://vault.vault.svc.cluster.local:8200}}"
VAULT_TRANSIT_TOKEN="${VAULT_TRANSIT_TOKEN:-${VAULT_TRANSIT_TOKEN}}"

# Timeout Configuration
VALIDATION_TIMEOUT="${VALIDATION_TIMEOUT:-30}"
NETWORK_TIMEOUT="${NETWORK_TIMEOUT:-10}"
DNS_TIMEOUT="${DNS_TIMEOUT:-5}"

# Retry Configuration
MAX_RETRIES="${MAX_RETRIES:-5}"
INITIAL_RETRY_DELAY="${INITIAL_RETRY_DELAY:-2}"

# Performance Thresholds (milliseconds)
DNS_LATENCY_EXCELLENT="${DNS_LATENCY_EXCELLENT:-1000}"
DNS_LATENCY_ACCEPTABLE="${DNS_LATENCY_ACCEPTABLE:-5000}"

# Security Configuration
TEMP_FILE_PERMISSIONS="${TEMP_FILE_PERMISSIONS:-600}"
CLEANUP_ON_FAILURE="${CLEANUP_ON_FAILURE:-true}"

# Debug Configuration
DEBUG_MODE="${DEBUG_MODE:-false}"
VERBOSE_OUTPUT="${VERBOSE_OUTPUT:-false}"
METRICS_ENABLED="${METRICS_ENABLED:-true}"
