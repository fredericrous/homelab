apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: external-dns-ovh-credentials
  namespace: external-dns
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-backend
  target:
    name: external-dns-ovh-credentials
    creationPolicy: Owner
    template:
      data:
        OVH_APPLICATION_KEY: '{{ .EXTERNAL_DNS_OVH_APPLICATION_KEY }}'
        OVH_APPLICATION_SECRET: '{{ .EXTERNAL_DNS_OVH_APPLICATION_SECRET }}'
        OVH_CONSUMER_KEY: '{{ .EXTERNAL_DNS_OVH_CONSUMER_KEY }}'
  dataFrom:
  - extract:
      key: secret/data/cluster-vars